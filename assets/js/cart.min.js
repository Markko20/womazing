const minus = document.querySelectorAll('.cart-table__item-img--minus')
const plus = document.querySelectorAll('.cart-table__item-img--plus')
const subTotal = document.querySelector('.cart-order__subtotal-text')
const total = document.querySelector('.cart-order__total-text')
const Item1 = document.querySelectorAll('.cart-table__item')
const close = document.querySelectorAll('.cart-table__item-imgclose')
mas = []

Item1.forEach(function(k){
      
  const priceTotal1 = k.querySelectorAll('#cart-price__total')
  
  priceTotal1.forEach(function(m){
    mas.push(Number(m.innerHTML.slice(1)))
  })
})
subTotal.textContent = '$' + (mas[0] + mas[3])
total.textContent = '$' + (mas[0] + mas[3])

minus.forEach(function(item){ 
  item.addEventListener('click', function(event){
    mas = []
    const counterWrapper = event.target.closest('.cart-table__item')
    const counter = counterWrapper.querySelectorAll('.cart-table__item--count')
    const price = counterWrapper.querySelector('#cart-price')
    const priceTotal = counterWrapper.querySelectorAll('#cart-price__total')

    counter.forEach(function(i){
      if(Number(i.innerHTML) > 1){
        i.textContent = Number(i.innerHTML) - 1
      }
      
      priceTotal.forEach(function(k){
        k.textContent = '$' + Number(price.innerHTML.slice(1)) * (Number(i.innerHTML))
      })
    })

    Item1.forEach(function(k){
      
      const priceTotal1 = k.querySelectorAll('#cart-price__total')
      
      priceTotal1.forEach(function(m){
        mas.push(Number(m.innerHTML.slice(1)))
      })
    })
    subTotal.textContent = '$' + (mas[0] + mas[3])
    total.textContent = '$' + (mas[0] + mas[3])
  })
})

plus.forEach(function(item){ 
  item.addEventListener('click', function(event){
    mas = []
    const counterWrapper = event.target.closest('.cart-table__item')
    const counter = counterWrapper.querySelectorAll('.cart-table__item--count')
    const price = counterWrapper.querySelector('#cart-price')
    const priceTotal = counterWrapper.querySelectorAll('#cart-price__total')

    counter.forEach(function(i){
      i.textContent = Number(i.innerHTML) + 1

      priceTotal.forEach(function(k){
        k.textContent = '$' + Number(price.innerHTML.slice(1)) *( Number(i.innerHTML))
      })
    })

    Item1.forEach(function(k){
      
      const priceTotal1 = k.querySelectorAll('#cart-price__total')
      priceTotal1.forEach(function(m){
        mas.push(Number(m.innerHTML.slice(1)))
      })
    })
    subTotal.textContent = '$' + (mas[0] + mas[3])
    total.textContent = '$' + (mas[0] + mas[3])
  })
})

close.forEach(function(item){ 
  item.addEventListener('click', function(event){
    const counterWrapper = event.target.closest('.cart-table__item')
    const priceTotal2 = counterWrapper.querySelector('#cart-price__total')
    subTotal.textContent = '$' + (Number(subTotal.innerHTML.slice(1)) - Number(priceTotal2.innerHTML.slice(1)))
    total.textContent = '$' + (Number(total.innerHTML.slice(1)) - Number(priceTotal2.innerHTML.slice(1)))
    counterWrapper.remove()
  })
})
